<!-- START: inst/pkgdown/templates/layout.html -->
<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- START: inst/pkgdown/templates/head.html -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta http-equiv="last-modified" content="2020-09-04 23:19:02 +0000">



<title>Programming with R: Analyzing Patient Data</title>

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="favicons/swc/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="favicons/swc/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="favicons/swc/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="favicons/swc/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="favicons/swc/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="favicons/swc/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/swc/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/swc/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-128.png" sizes="128x128" />

<meta name="application-name" content="Software Carpentry - Programming with R"/>

<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="favicons/swc/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="favicons/swc/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="favicons/swc/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="favicons/swc/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="favicons/swc/mstile-310x310.png" />



<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>

<!--carpentries-->
<link href="css/syntax.css" rel="stylesheet">
<link href="css/lesson.css" rel="stylesheet">
<script src="js/lesson.js"></script>




<meta property="og:title" content="Analyzing Patient Data" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- END:   inst/pkgdown/templates/head.html-->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <!-- START: inst/pkgdown/templates/navbar.html -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Home</a>
        <!-- TODO: the logo is not centered in the nav bar and looks ugly... also there needs to be a better way of choosing the logo... probably on the R side.-->
        <a href="https://software-carpentry.org" class="pull-left">
          <img class="navbar-logo" src="img/swc-icon-blue.svg" alt="Software Carpentry logo" />
        </a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Episodes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-starting-with-data.html">Analyzing Patient Data</a>
    </li>
    <li>
      <a href="02-func-R.html">Creating Functions</a>
    </li>
    <li>
      <a href="03-loops-R.html">Analyzing Multiple Data Sets</a>
    </li>
    <li>
      <a href="04-cond.html">Making Choices</a>
    </li>
    <li>
      <a href="05-cmdline.html">Command-Line Programs</a>
    </li>
    <li>
      <a href="06-best-practices-R.html">Best Practices for Writing R Code</a>
    </li>
    <li>
      <a href="07-knitr-R.html">Dynamic Reports with knitr</a>
    </li>
    <li>
      <a href="08-making-packages-R.html">Making Packages in R</a>
    </li>
    <li>
      <a href="09-supp-intro-rstudio.html">Introduction to RStudio</a>
    </li>
    <li>
      <a href="10-supp-addressing-data.html">Addressing Data</a>
    </li>
    <li>
      <a href="11-supp-read-write-csv.html">Reading and Writing CSV Files</a>
    </li>
    <li>
      <a href="12-supp-factors.html">Understanding Factors</a>
    </li>
    <li>
      <a href="13-supp-data-structures.html">Data Types and Structures</a>
    </li>
    <li>
      <a href="14-supp-call-stack.html">The Call Stack</a>
    </li>
    <li>
      <a href="15-supp-loops-in-depth.html">Loops in R</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

      <!--START: inst/pkgdown/templates/header.html-->


    <div class="panel panel-default life-cycle">
      <div id="life-cycle" class="panel-body alpha">
        
         This lesson is in the early stages of development (Alpha version) 
        
      </div>
    </div>


<!--END  : inst/pkgdown/templates/header.html-->

      </header>

<!-- START: inst/pkgdown/templates/content-title-body.html -->
<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Analyzing Patient Data</h1>
    </div>

<div class="objectives" markdown="1">
<ul>
<li>Read tabular data from a file into a program.</li>
<li>Assign values to variables.</li>
<li>Select individual values and subsections from data.</li>
<li>Perform operations on a data frame of data.</li>
<li>Display simple graphs.</li>
</ul>
</div>
<div class="questions" markdown="1">
<ul>
<li>How do I read data into R?</li>
<li>How do I assign variables?</li>
<li>What is a data frame?</li>
<li>How do I access subsets of a data frame?</li>
<li>How do I calculate simple statistics like mean and median?</li>
<li>Where can I get help?</li>
<li>How can I plot my data?</li>
</ul>
</div>
<p>We are studying inflammation in patients who have been given a new treatment for arthritis, and need to analyze the first dozen data sets. The data sets are stored in <a href="%7B%7B%20page.root%20%7D%7D/reference.html#comma-separated-values-csv">comma-separated values</a> (CSV format. Each row holds the observations for just one patient. Each column holds the inflammation measured in a day, so we have a set of values in successive days. The first few rows of our first file look like this:</p>
<pre class="output"><code>0,0,1,3,1,2,4,7,8,3,3,3,10,5,7,4,7,7,12,18,6,13,11,11,7,7,4,6,8,8,4,4,5,7,3,4,2,3,0,0
0,1,2,1,2,1,3,2,2,6,10,11,5,9,4,4,7,16,8,6,18,4,12,5,12,7,11,5,11,3,3,5,4,4,5,5,1,1,0,1
0,1,1,3,3,2,6,2,5,9,5,7,4,5,4,15,5,11,9,10,19,14,12,17,7,12,11,7,4,2,10,5,4,2,2,3,2,2,1,1
0,0,2,0,4,2,2,1,6,7,10,7,9,13,8,8,15,10,10,7,17,4,4,7,6,15,6,4,9,11,3,5,6,3,3,4,2,3,2,1
0,1,1,3,3,1,3,5,2,4,4,7,6,5,3,10,8,10,6,17,9,14,9,7,13,9,12,6,7,7,9,6,3,2,2,4,2,0,1,1</code></pre>
<p>We want to:</p>
<ul>
<li>Load data into memory,</li>
<li>Calculate the average value of inflammation per day across all patients, and</li>
<li>Plot the results.</li>
</ul>
<p>To do all that, we’ll have to learn a little bit about programming.</p>
<div id="loading-data" class="section level3">
<h3>Loading Data</h3>
<p>Let’s import the file called <code>inflammation-01.csv</code> into our R environment. To import the file, first we need to tell our computer where the file is. We do that by choosing a working directory, that is, a local directory on our computer containing the files we need. This is very important in R. If we forget this step we’ll get an error message saying that the file does not exist. We can set the working directory using the function <code>setwd</code>. For this example, we change the path to our new directory at the desktop:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">setwd</span>(<span class="st">&quot;~/Desktop/r-novice-inflammation/&quot;</span>)</span></code></pre></div>
<p>Just like in the Unix Shell, we type the command and then press <kbd>Return</kbd> (or <kbd>Enter</kbd>). Also similar to the Unix Shell, we can use tab completion to make it easier to type the working directory. So while typing inside the setwd command’s quotes, we can press <kbd>Tab</kbd> to list possible directories. Alternatively we can change the working directory using the RStudio GUI using the menu option <code>Session</code> -&gt; <code>Set Working Directory</code> -&gt; <code>Choose Directory...</code></p>
<p>The data file is located in the directory <code>data</code> inside the working directory. Now we can load the data into R using <code>read.csv</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>The expression <code>read.csv(...)</code> is a <a href="%7B%7B%20page.root%20%7D%7D/reference.html#function-call">function call</a> that asks R to run the function <code>read.csv</code>.</p>
<p><code>read.csv</code> has two <a href="%7B%7B%20page.root%20%7D%7D/reference.html#argument">arguments</a>: the name of the file we want to read, and whether the first line of the file contains names for the columns of data. The filename needs to be a character string (or <a href="%7B%7B%20page.root%20%7D%7D/reference.html#string">string</a> for short, so we put it in quotes. Assigning the second argument, <code>header</code>, to be <code>FALSE</code> indicates that the data file does not have column headers. We’ll talk more about the value <code>FALSE</code>, and its converse <code>TRUE</code>, in lesson 04. In case of our <code>inflammation-01.csv</code> example, R auto-generates column names in the sequence <code>V1</code> (for “variable 1”), <code>V2</code>, and so on, until <code>V40</code>.</p>
</div>
<div id="other-options-for-reading-csv-files" class="section level2 callout" markdown="1">
<h2>Other Options for Reading CSV Files</h2>
<p><code>read.csv</code> actually has many more arguments that you may find useful when importing your own data in the future. You can learn more about these options in this supplementary <a href="%7B%7B%20page.root%20%7D%7D/11-supp-read-write-csv/">lesson</a>.</p>
</div>
<div class="challenge" markdown="1">
<div id="loading-data-with-headers" class="section level2">
<h2>Loading Data with Headers</h2>
<p>What happens if you forget to put <code>header = FALSE</code>? The default value is <code>header = TRUE</code>, which you can check with <code>?read.csv</code> or <code>help(read.csv)</code>. What do you expect will happen if you leave the default value? Before you run any code, think about what will happen to the first few rows of your data frame, and its overall size. Then run the following code and see if your expectations agree:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/inflammation-01.csv&quot;</span>)</span></code></pre></div>
<pre class="output"><code>   X0 X0.1 X1 X3 X1.1 X2 X4 X7 X8 X3.1 X3.2 X3.3 X10 X5 X7.1 X4.1 X7.2 X7.3 X12 X18 X6 X13 X11 X11.1 X7.4 X7.5 X4.2 X6.1 X8.1 X8.2 X4.3 X4.4 X5.1 X7.6 X3.4 X4.5 X2.1 X3.5 X0.2 X0.3
1   0    1  2  1    2  1  3  2  2    6   10   11   5  9    4    4    7   16   8   6 18   4  12     5   12    7   11    5   11    3    3    5    4    4    5    5    1    1    0    1
2   0    1  1  3    3  2  6  2  5    9    5    7   4  5    4   15    5   11   9  10 19  14  12    17    7   12   11    7    4    2   10    5    4    2    2    3    2    2    1    1
3   0    0  2  0    4  2  2  1  6    7   10    7   9 13    8    8   15   10  10   7 17   4   4     7    6   15    6    4    9   11    3    5    6    3    3    4    2    3    2    1
4   0    1  1  3    3  1  3  5  2    4    4    7   6  5    3   10    8   10   6  17  9  14   9     7   13    9   12    6    7    7    9    6    3    2    2    4    2    0    1    1
5   0    0  1  2    2  4  2  1  6    4    7    6   6  9    9   15    4   16  18  12 12   5  18     9    5    3   10    3   12    7    8    4    7    3    5    4    4    3    2    1
6   0    0  2  2    4  2  2  5  5    8    6    5  11  9    4   13    5   12  10   6  9  17  15     8    9    3   13    7    8    2    8    8    4    2    3    5    4    1    1    1
7   0    0  1  2    3  1  2  3  5    3    7    8   8  5   10    9   15   11  18  19 20   8   5    13   15   10    6   10    6    7    4    9    3    5    2    5    3    2    2    1
8   0    0  0  3    1  5  6  5  5    8    2    4  11 12   10   11    9   10  17  11  6  16  12     6    8   14    6   13   10   11    4    6    4    7    6    3    2    1    0    0
9   0    1  1  2    1  3  5  3  5    8    6    8  12  5   13    6   13    8  16   8 18  15  16    14   12    7    3    8    9   11    2    5    4    5    1    4    1    2    0    0
10  0    1  0  0    4  3  3  5  5    4    5    8   7 10   13    3    7   13  15  18  8  15  15    16   11   14   12    4   10   10    4    3    4    5    5    3    3    2    2    1
11  0    1  0  0    3  4  2  7  8    5    2    8  11  5    5    8   14   11   6  11  9  16  18     6   12    5    4    3    5    7    8    3    5    4    5    5    4    0    1    1
12  0    0  2  1    4  3  6  4  6    7    9    9   3 11    6   12    4   17  13  15 13  12   8     7    4    7   12    9    5    6    5    4    7    3    5    4    2    3    0    1
13  0    0  0  0    1  3  1  6  6    5    5    6   3  6   13    3   10   13   9  16 15   9  11     4    6    4   11   11   12    3    5    8    7    4    6    4    1    3    0    0
14  0    1  2  1    1  1  4  1  5    2    3    3  10  7   13    5    7   17   6   9 12  13  10     4   12    4    6    7    6   10    8    2    5    1    3    4    2    0    2    0
15  0    1  1  0    1  2  4  3  6    4    7    5   5  7    5   10    7    8  18  17  9   8  12    11   11   11   14    6   11    2   10    9    5    6    5    3    4    2    2    0
16  0    0  0  0    2  3  6  5  7    4    3    2  10  7    9   11   12    5  12   9 13  19  14    17    5   13    8   11    5   10    9    8    7    5    3    1    4    0    2    1
17  0    0  0  1    2  1  4  3  6    7    4    2  12  6   12    4   14    7   8  14 13  19   6     9   12    6    4   13    6    7    2    3    6    5    4    2    3    0    1    0
18  0    0  2  1    2  5  4  2  7    8    4    7  11  9    8   11   15   17  11  12  7  12   7     6    7    4   13    5    7    6    6    9    2    1    1    2    2    0    1    0
19  0    1  2  0    1  4  3  2  2    7    3    3  12 13   11   13    6    5   9  16  9  19  16    11    8    9   14   12   11    9    6    6    6    1    1    2    4    3    1    1
20  0    1  1  3    1  4  4  1  8    2    2    3  12 12   10   15   13    6   5   5 18  19   9     6   11   12    7    6    3    6    3    2    4    3    1    5    4    2    2    0
21  0    0  2  3    2  3  2  6  3    8    7    4   6  6    9    5   12   12   8   5 12  10  16     7   14   12    5    4    6    9    8    5    6    6    1    4    3    0    2    0
22  0    0  0  3    4  5  1  7  7    8    2    5  12  4   10   14    5    5  17  13 16  15  13     6   12    9   10    3    3    7    4    4    8    2    6    5    1    0    1    0
23  0    1  1  1    1  3  3  2  6    3    9    7   8  8    4   13    7   14  11  15 14  13   5    13    7   14    9   10    5   11    5    3    5    1    1    4    4    1    2    0
24  0    1  1  1    2  3  5  3  6    3    7   10   3  8   12    4   12    9  15   5 17  16   5    10   10   15    7    5    3   11    5    5    6    1    1    1    1    0    2    1
25  0    0  2  1    3  3  2  7  4    4    3    8  12  9   12    9    5   16   8  17  7  11  14     7   13   11    7   12   12    7    8    5    7    2    2    4    1    1    1    0
26  0    0  1  2    4  2  2  3  5    7   10    5   5 12    3   13    4   13   7  15  9  12  18    14   16   12    3   11    3    2    7    4    8    2    2    1    3    0    1    1
27  0    0  1  1    1  5  1  5  2    2    4   10   4  8   14    6   15    6  12  15 15  13   7    17    4    5   11    4    8    7    9    4    5    3    2    5    4    3    2    1
28  0    0  2  2    3  4  6  3  7    6    4    5   8  4    7    7    6   11  12  19 20  18   9     5    4    7   14    8    4    3    7    7    8    3    5    4    1    3    1    0
29  0    0  0  1    4  4  6  3  8    6    4   10  12  3    3    6    8    7  17  16 14  15  17     4   14   13    4    4   12   11    6    9    5    5    2    5    2    1    0    1
30  0    1  1  0    3  2  4  6  8    6    2    3  11  3   14   14   12    8   8  16 13   7   6     9   15    7    6    4   10    8   10    4    2    6    5    5    2    3    2    1
31  0    0  2  3    3  4  5  3  6    7   10    5  10 13   14    3    8   10   9   9 19  15  15     6    8    8   11    5    5    7    3    6    6    4    5    2    2    3    0    0
32  0    1  2  2    2  3  6  6  6    7    6    3  11 12   13   15   15   10  14  11 11   8   6    12   10    5   12    7    7   11    5    8    5    2    5    5    2    0    2    1
33  0    0  2  1    3  5  6  7  5    8    9    3  12 10   12    4   12    9  13  10 10   6  10    11    4   15   13    7    3    4    2    9    7    2    4    2    1    2    1    1
34  0    0  1  2    4  1  5  5  2    3    4    8   8 12    5   15    9   17   7  19 14  18  12    17   14    4   13   13    8   11    5    6    6    2    3    5    2    1    1    1
35  0    0  0  3    1  3  6  4  3    4    8    3   4  8    3   11    5    7  10   5 15   9  16    17   16    3    8    9    8    3    3    9    5    1    6    5    4    2    2    0
36  0    1  2  2    2  5  5  1  4    6    3    6   5  9    6    7    4    7  16   7 16  13   9    16   12    6    7    9   10    3    6    4    5    4    6    3    4    3    2    1
37  0    1  1  2    3  1  5  1  2    2    5    7   6  6    5   10    6    7  17  13 15  16  17    14    4    4   10   10   10   11    9    9    5    4    4    2    1    0    1    0
38  0    1  0  3    2  4  1  1  5    9   10    7  12 10    9   15   12   13  13   6 19   9  10     6   13    5   13    6    7    2    5    5    2    1    1    1    1    3    0    1
39  0    1  1  3    1  1  5  5  3    7    2    2   3 12    4    6    8   15  16  16 15   4  14     5   13   10    7   10    6    3    2    3    6    3    3    5    4    3    2    1
40  0    0  0  2    2  1  3  4  5    5    6    5   5 12   13    5    7    5  11  15 18   7   9    10   14   12   11    9   10    3    2    9    6    2    2    5    3    0    0    1
41  0    0  1  3    3  1  2  1  8    9    2    8  10  3    8    6   10   13  11  17 19   6   4    11    6   12    7    5    5    4    4    8    2    6    6    4    2    2    0    0
42  0    1  1  3    4  5  2  1  3    7    9    6  10  5    8   15   11   12  15   6 12  16   6     4   14    3   12    9    6   11    5    8    5    5    6    1    2    1    2    0
43  0    0  1  3    1  4  3  6  7    8    5    7  11  3    6   11    6   10   6  19 18  14   6    10    7    9    8    5    8    3   10    2    5    1    5    4    2    1    0    1
44  0    1  1  3    3  4  4  6  3    4    9    9   7  6    8   15   12   15   6  11  6  18   5    14   15   12    9    8    3    6   10    6    8    7    2    5    4    3    1    1
45  0    1  2  2    4  3  1  4  8    9    5   10  10  3    4    6    7   11  16   6 14   9  11    10   10    7   10    8    8    4    5    8    4    4    5    2    4    1    1    0
46  0    0  2  3    4  5  4  6  2    9    7    4   9 10    8   11   16   12  15  17 19  10  18    13   15   11    8    4    7   11    6    7    6    5    1    3    1    0    0    0
47  0    1  1  3    1  4  6  2  8    2   10    3  11  9   13   15    5   15   6  10 10   5  14    15   12    7    4    5   11    4    6    9    5    6    1    1    2    1    2    1
48  0    0  1  3    2  5  1  2  7    6    6    3  12  9    4   14    4    6  12   9 12   7  11     7   16    8   13    6    7    6   10    7    6    3    1    5    4    3    0    0
49  0    0  1  2    3  4  5  7  5    4   10    5  12 12    5    4    7    9  18  16 16  10  15    15   10    4    3    7    5    9    4    6    2    4    1    4    2    2    2    1
50  0    1  2  1    1  3  5  3  6    3   10   10  11 10   13   10   13    6   6  14  5   4   5     5    9    4   12    7    7    4    7    9    3    3    6    3    4    1    2    0
51  0    1  2  2    3  5  2  4  5    6    8    3   5  4    3   15   15   12  16   7 20  15  12     8    9    6   12    5    8    3    8    5    4    1    3    2    1    3    1    0
52  0    0  0  2    4  4  5  3  3    3   10    4   4  4   14   11   15   13  10  14 11  17   9    11   11    7   10   12   10   10   10    8    7    5    2    2    4    1    2    1
53  0    0  2  1    1  4  4  7  2    9    4   10  12  7    6    6   11   12   9  15 15   6   6    13    5   12    9    6    4    7    7    6    5    4    1    4    2    2    2    1
54  0    1  2  1    1  4  5  4  4    5    9    7  10  3   13   13    8    9  17  16 16  15  12    13    5   12   10    9   11    9    4    5    5    2    2    5    1    0    0    1
55  0    0  1  3    2  3  6  4  5    7    2    4  11 11    3    8    8   16   5  13 16   5   8     8    6    9   10   10    9    3    3    5    3    5    4    5    3    3    0    1
56  0    1  1  2    2  5  1  7  4    2    5    5   4  6    6    4   16   11  14  16 14  14   8    17    4   14   13    7    6    3    7    7    5    6    3    4    2    2    1    1
57  0    1  1  1    4  1  6  4  6    3    6    5   6  4   14   13   13    9  12  19  9  10  15    10    9   10   10    7    5    6    8    6    6    4    3    5    2    1    1    1
58  0    0  0  1    4  5  6  3  8    7    9   10   8  6    5   12   15    5  10   5  8  13  18    17   14    9   13    4   10   11   10    8    8    6    5    5    2    0    2    0
59  0    0  1  0    3  2  5  4  8    2    9    3   3 10   12    9   14   11  13   8  6  18  11     9   13   11    8    5    5    2    8    5    3    5    4    1    3    1    1    0</code></pre>
</div>
<div id="solution" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<p>R will construct column headers from values in your first row of data, resulting in <code>X0 X0.1 X1 X3 X1.1 X2 ...</code>.</p>
<p>Note that the <code>X</code> is prepended just a number would not be a valid variable name. Because that’s what column headers are, the same rules apply. Appending <code>.1</code>, <code>.2</code> etc. is necessary to avoid duplicate column headers.</p>
</div>
</div>
<div class="challenge" markdown="1">
<div id="reading-different-decimal-point-formats" class="section level2">
<h2>Reading Different Decimal Point Formats</h2>
<p>Depending on the country you live in, your standard can use the dot or the comma as decimal mark. Also, different devices or software can generate data with different decimal points. Take a look at <code>?read.csv</code> and write the code to load a file called <code>commadec.txt</code> that has numeric values with commas as decimal mark, separated by semicolons.</p>
</div>
<div id="solution-1" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/commadec.txt&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>, <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<pre class="warning"><code>Warning in file(file, &quot;rt&quot;): cannot open file &#39;data/commadec.txt&#39;: No such file or directory</code></pre>
<pre class="error"><code>Error in file(file, &quot;rt&quot;): cannot open the connection</code></pre>
<p>or the built-in shortcut:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">read.csv2</span>(<span class="dt">file =</span> <span class="st">&quot;data/commadec.txt&quot;</span>)</span></code></pre></div>
<pre class="warning"><code>Warning in file(file, &quot;rt&quot;): cannot open file &#39;data/commadec.txt&#39;: No such file or directory</code></pre>
<pre class="error"><code>Error in file(file, &quot;rt&quot;): cannot open the connection</code></pre>
</div>
</div>
<p>A function will perform its given action on whatever value is passed to the argument(s). For example, in this case if we provided the name of a different file to the argument <code>file</code>, <code>read.csv</code> would read that instead. We’ll learn more about the details of functions and their arguments in the next lesson.</p>
<p>Since we didn’t tell it to do anything else with the function’s output, the console will display the full contents of the file <code>inflammation-01.csv</code>. Try it out.</p>
<p><code>read.csv</code> reads the file, but we can’t use the data unless we assign it to a variable. We can think of a variable as a container with a name, such as <code>x</code>, <code>current_temperature</code>, or <code>subject_id</code> that contains one or more values. We can create a new variable and assign a value to it using <code>&lt;-</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>weight_kg &lt;-<span class="st"> </span><span class="dv">55</span></span></code></pre></div>
<p>Once a variable is created, we can use the variable name to refer to the value it was assigned. The variable name now acts as a tag. Whenever R reads that tag (<code>weight_kg</code>), it substitutes the value (<code>55</code>).</p>
<p><img src="fig/tag-variables.svg" alt="Variables as Tags" /></p>
<p>To see the value of a variable, we can print it by typing the name of the variable and hitting <kbd>Return</kbd> (or <kbd>Enter</kbd>). In general, R will print to the console any object returned by a function or operation <em>unless</em> we assign it to a variable.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>weight_kg</span></code></pre></div>
<pre class="output"><code>[1] 55</code></pre>
<p>We can treat our variable like a regular number, and do arithmetic with it:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># weight in pounds:</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fl">2.2</span> <span class="op">*</span><span class="st"> </span>weight_kg</span></code></pre></div>
<pre class="output"><code>[1] 121</code></pre>
<p><img src="fig/arithmetic-variables.svg" alt="Variables as Tags" /></p>
<div id="commenting" class="section level2 callout" markdown="1">
<h2>Commenting</h2>
<p>We can add comments to our code using the <code>#</code> character. It is useful to document our code in this way so that others (and us the next time we read it) have an easier time following what the code is doing.</p>
</div>
<p>We can also change a variable’s value by assigning it a new value:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>weight_kg &lt;-<span class="st"> </span><span class="fl">57.5</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="co"># weight in kilograms is now</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>weight_kg</span></code></pre></div>
<pre class="output"><code>[1] 57.5</code></pre>
<div id="variable-naming-conventions" class="section level2 callout" markdown="1">
<h2>Variable Naming Conventions</h2>
<p>Historically, R programmers have used a variety of conventions for naming variables. The <code>.</code> character in R can be a valid part of a variable name; thus the above assignment could have easily been <code>weight.kg &lt;- 57.5</code>. This is often confusing to R newcomers who have programmed in languages where <code>.</code> has a more significant meaning. Today, most R programmers 1) start variable names with lower case letters, 2) separate words in variable names with underscores, and 3) use only lowercase letters, underscores, and numbers in variable names. The book <em>R Packages</em> includes a <a href="http://r-pkgs.had.co.nz/style.html">chapter</a> on this and other style considerations.</p>
</div>
<p><img src="fig/reassign-variables.svg" alt="Reassigning Variables" /></p>
<p>Assigning a new value to a variable breaks the connection with the old value; R forgets that number and applies the variable name to the new value.</p>
<p>When you assign a value to a variable, R only stores the value, not the calculation you used to create it. This is an important point if you’re used to the way a spreadsheet program automatically updates linked cells. Let’s look at an example.</p>
<p>First, we’ll convert <code>weight_kg</code> into pounds, and store the new value in the variable <code>weight_lb</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>weight_lb &lt;-<span class="st"> </span><span class="fl">2.2</span> <span class="op">*</span><span class="st"> </span>weight_kg</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co"># weight in kg...</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>weight_kg</span></code></pre></div>
<pre class="output"><code>[1] 57.5</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># ...and in pounds</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>weight_lb</span></code></pre></div>
<pre class="output"><code>[1] 126.5</code></pre>
<p>In words, we’re asking R to look up the value we tagged <code>weight_kg</code>, multiply it by 2.2, and tag the result with the name <code>weight_lb</code>:</p>
<p><img src="fig/new-variables.svg" alt="Creating Another Variable" /></p>
<p>If we now change the value of <code>weight_kg</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>weight_kg &lt;-<span class="st"> </span><span class="fl">100.0</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co"># weight in kg now...</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>weight_kg</span></code></pre></div>
<pre class="output"><code>[1] 100</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># ...and weight in pounds still</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>weight_lb</span></code></pre></div>
<pre class="output"><code>[1] 126.5</code></pre>
<p><img src="fig/memory-variables.svg" alt="Updating a Variable" /></p>
<p>Since <code>weight_lb</code> doesn’t “remember” where its value came from, it isn’t automatically updated when <code>weight_kg</code> changes. This is different from the way spreadsheets work.</p>
<div id="printing-with-parentheses" class="section level2 callout" markdown="1">
<h2>Printing with Parentheses</h2>
<p>An alternative way to print the value of a variable is to use <code>(</code> parentheses <code>)</code> around the assignment statement. As an example: <code>(total_weight &lt;- weight_kg*2.2 + weight_lb)</code> adds the values of <code>weight_kg*2.2</code> and <code>weight_lb</code>, assigns the result to the <code>total_weight</code>, and finally prints the assigned value of the variable <code>total_weight</code>.</p>
</div>
<p>Now that we know how to assign things to variables, let’s re-run <code>read.csv</code> and save its result into a variable called ‘dat’:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>This statement doesn’t produce any output because the assignment doesn’t display anything. If we want to check if our data has been loaded, we can print the variable’s value by typing the name of the variable <code>dat</code>. However, for large data sets it is convenient to use the function <code>head</code> to display only the first few rows of data.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">head</span>(dat)</span></code></pre></div>
<pre class="output"><code>  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1  0  0  1  3  1  2  4  7  8   3   3   3  10   5   7   4   7   7  12  18   6  13  11  11   7   7   4   6   8   8   4   4   5   7   3   4   2   3   0   0
2  0  1  2  1  2  1  3  2  2   6  10  11   5   9   4   4   7  16   8   6  18   4  12   5  12   7  11   5  11   3   3   5   4   4   5   5   1   1   0   1
3  0  1  1  3  3  2  6  2  5   9   5   7   4   5   4  15   5  11   9  10  19  14  12  17   7  12  11   7   4   2  10   5   4   2   2   3   2   2   1   1
4  0  0  2  0  4  2  2  1  6   7  10   7   9  13   8   8  15  10  10   7  17   4   4   7   6  15   6   4   9  11   3   5   6   3   3   4   2   3   2   1
5  0  1  1  3  3  1  3  5  2   4   4   7   6   5   3  10   8  10   6  17   9  14   9   7  13   9  12   6   7   7   9   6   3   2   2   4   2   0   1   1
6  0  0  1  2  2  4  2  1  6   4   7   6   6   9   9  15   4  16  18  12  12   5  18   9   5   3  10   3  12   7   8   4   7   3   5   4   4   3   2   1</code></pre>
<div class="challenge" markdown="1">
<div id="assigning-values-to-variables" class="section level2">
<h2>Assigning Values to Variables</h2>
<p>Draw diagrams showing what variables refer to what values after each statement in the following program:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>mass &lt;-<span class="st"> </span><span class="fl">47.5</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>age &lt;-<span class="st"> </span><span class="dv">122</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>mass &lt;-<span class="st"> </span>mass <span class="op">*</span><span class="st"> </span><span class="fl">2.0</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>age &lt;-<span class="st"> </span>age <span class="op">-</span><span class="st"> </span><span class="dv">20</span></span></code></pre></div>
</div>
<div id="solution-2" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>mass &lt;-<span class="st"> </span><span class="fl">47.5</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>age &lt;-<span class="st"> </span><span class="dv">122</span></span></code></pre></div>
<p><img src="fig/mass-age-assign-1.svg" alt="Assigning Variables" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>mass &lt;-<span class="st"> </span>mass <span class="op">*</span><span class="st"> </span><span class="fl">2.0</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>age &lt;-<span class="st"> </span>age <span class="op">-</span><span class="st"> </span><span class="dv">20</span></span></code></pre></div>
<p><img src="fig/mass-age-assign-2.svg" alt="Assigning Variables" /></p>
</div>
</div>
<div id="manipulating-data" class="section level3">
<h3>Manipulating Data</h3>
<p>Now that our data are loaded into R, we can start doing things with them. First, let’s ask what type of thing <code>dat</code> is:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="kw">class</span>(dat)</span></code></pre></div>
<pre class="output"><code>[1] &quot;data.frame&quot;</code></pre>
<p>The output tells us that it’s a data frame. Think of this structure as a spreadsheet in MS Excel that many of us are familiar with. Data frames are very useful for storing data and you will use them frequently when programming in R. A typical data frame of experimental data contains individual observations in rows and variables in columns.</p>
<p>We can see the shape, or <a href="%7B%7B%20page.root%20%7D%7D/reference.html#dimensions-of-an-array">dimensions</a>, of the data frame with the function <code>dim</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="kw">dim</span>(dat)</span></code></pre></div>
<pre class="output"><code>[1] 60 40</code></pre>
<p>This tells us that our data frame, <code>dat</code>, has 60 rows and 40 columns.</p>
<p>If we want to get a single value from the data frame, we can provide an <a href="%7B%7B%20page.root%20%7D%7D/reference.html#index">index</a> in square brackets. The first number specifies the row and the second the column:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># first value in dat, row 1, column 1</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>dat[<span class="dv">1</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre class="output"><code>[1] 0</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># middle value in dat, row 30, column 20</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>dat[<span class="dv">30</span>, <span class="dv">20</span>]</span></code></pre></div>
<pre class="output"><code>[1] 16</code></pre>
<p>The first value in a data frame index is the row, the second value is the column. If we want to select more than one row or column, we can use the function <code>c</code>, which stands for <strong>c</strong>ombine. For example, to pick columns 10 and 20 from rows 1, 3, and 5, we can do this:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>dat[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>)]</span></code></pre></div>
<pre class="output"><code>  V10 V20
1   3  18
3   9  10
5   4  17</code></pre>
<p>We frequently want to select contiguous rows or columns, such as the first ten rows, or columns 3 through 7. You can use <code>c</code> for this, but it’s more convenient to use the <code>:</code> operator. This special function generates sequences of numbers:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span></code></pre></div>
<pre class="output"><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="dv">3</span><span class="op">:</span><span class="dv">12</span></span></code></pre></div>
<pre class="output"><code> [1]  3  4  5  6  7  8  9 10 11 12</code></pre>
<p>For example, we can select the first ten columns of values for the first four rows like this:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>dat[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre class="output"><code>  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
1  0  0  1  3  1  2  4  7  8   3
2  0  1  2  1  2  1  3  2  2   6
3  0  1  1  3  3  2  6  2  5   9
4  0  0  2  0  4  2  2  1  6   7</code></pre>
<p>or the first ten columns of rows 5 to 10 like this:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>dat[<span class="dv">5</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre class="output"><code>   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
5   0  1  1  3  3  1  3  5  2   4
6   0  0  1  2  2  4  2  1  6   4
7   0  0  2  2  4  2  2  5  5   8
8   0  0  1  2  3  1  2  3  5   3
9   0  0  0  3  1  5  6  5  5   8
10  0  1  1  2  1  3  5  3  5   8</code></pre>
<p>If you want to select all rows or all columns, leave that index value empty.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># All columns from row 5</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>dat[<span class="dv">5</span>, ]</span></code></pre></div>
<pre class="output"><code>  V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
5  0  1  1  3  3  1  3  5  2   4   4   7   6   5   3  10   8  10   6  17   9  14   9   7  13   9  12   6   7   7   9   6   3   2   2   4   2   0   1   1</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="co"># All rows from column 16-18</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>dat[, <span class="dv">16</span><span class="op">:</span><span class="dv">18</span>]</span></code></pre></div>
<pre class="output"><code>   V16 V17 V18
1    4   7   7
2    4   7  16
3   15   5  11
4    8  15  10
5   10   8  10
6   15   4  16
7   13   5  12
8    9  15  11
9   11   9  10
10   6  13   8
11   3   7  13
12   8  14  11
13  12   4  17
14   3  10  13
15   5   7  17
16  10   7   8
17  11  12   5
18   4  14   7
19  11  15  17
20  13   6   5
21  15  13   6
22   5  12  12
23  14   5   5
24  13   7  14
25   4  12   9
26   9   5  16
27  13   4  13
28   6  15   6
29   7   6  11
30   6   8   7
31  14  12   8
32   3   8  10
33  15  15  10
34   4  12   9
35  15   9  17
36  11   5   7
37   7   4   7
38  10   6   7
39  15  12  13
40   6   8  15
41   5   7   5
42   6  10  13
43  15  11  12
44  11   6  10
45  15  12  15
46   6   7  11
47  11  16  12
48  15   5  15
49  14   4   6
50   4   7   9
51  10  13   6
52  15  15  12
53  11  15  13
54   6  11  12
55  13   8   9
56   8   8  16
57   4  16  11
58  13  13   9
59  12  15   5
60   9  14  11</code></pre>
<p>If you leave both index values empty (i.e., <code>dat[,]</code>), you get the entire data frame.</p>
</div>
<div id="addressing-columns-by-name" class="section level2 callout" markdown="1">
<h2>Addressing Columns by Name</h2>
<p>Columns can also be addressed by name, with either the <code>$</code> operator (ie. <code>dat$V16</code>) or square brackets (ie. <code>dat[, 'V16']</code>). You can learn more about subsetting by column name in this supplementary <a href="%7B%7B%20page.root%20%7D%7D/10-supp-addressing-data/">lesson</a>.</p>
</div>
<p>Now let’s perform some common mathematical operations to learn more about our inflammation data. When analyzing data we often want to look at partial statistics, such as the maximum value per patient or the average value per day. One way to do this is to select the data we want to create a new temporary data frame, and then perform the calculation on this subset:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="co"># first row, all of the columns</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>patient_<span class="dv">1</span> &lt;-<span class="st"> </span>dat[<span class="dv">1</span>, ]</span>
<span id="cb55-3"><a href="#cb55-3"></a><span class="co"># max inflammation for patient 1</span></span>
<span id="cb55-4"><a href="#cb55-4"></a><span class="kw">max</span>(patient_<span class="dv">1</span>)</span></code></pre></div>
<pre class="output"><code>[1] 18</code></pre>
<!-- 
    OUCH!! The following may be true, but it will vary by R version, not by
    installation! There shouldn't be an issue with a data frame where all
    columns are numeric without missing values. Under those circumstances,
    coercion should do what you expect. You'll get problems with mixed
    types (factors, character etc), or with missing values. If this is
    actually a problem, we need to change the example - we should be able
    to come up with an example that doesn't require this ugliness in the
    very first lesson. 
    
    Also, columns always work as expected because by definition a column
    contains a vector of values of the same type. Rows include values from
    different columns, which of course can be different types. This doesn't
    need to be confusing, and if we're careful in our presentation here we
    can avoid this until the students know enough to cope rationally.
-->
<!--
> ## Forcing Conversion
>
> The code above may give you an error in some R installations,
> since R does not automatically convert a row from a `data.frame` to a vector.
> (Confusingly, subsetted columns are automatically converted.)
> If this happens, you can use the `as.numeric` command to convert the row of data to a numeric vector:
>
> `patient_1 <- as.numeric(dat[1, ])`
>
> `max(patient_1)`
>
> You can also check the `class` of each object:
>
> `class(dat[1, ])`
>
> `class(as.numeric(dat[1, ]))`
{: .callout}
-->
<p>We don’t actually need to store the row in a variable of its own. Instead, we can combine the selection and the function call:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="co"># max inflammation for patient 2</span></span>
<span id="cb57-2"><a href="#cb57-2"></a><span class="kw">max</span>(dat[<span class="dv">2</span>, ])</span></code></pre></div>
<pre class="output"><code>[1] 18</code></pre>
<p>R also has functions for other common calculations, e.g. finding the minimum, mean, median, and standard deviation of the data:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="co"># minimum inflammation on day 7</span></span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="kw">min</span>(dat[, <span class="dv">7</span>])</span></code></pre></div>
<pre class="output"><code>[1] 1</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="co"># mean inflammation on day 7</span></span>
<span id="cb61-2"><a href="#cb61-2"></a><span class="kw">mean</span>(dat[, <span class="dv">7</span>])</span></code></pre></div>
<pre class="output"><code>[1] 3.8</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="co"># median inflammation on day 7</span></span>
<span id="cb63-2"><a href="#cb63-2"></a><span class="kw">median</span>(dat[, <span class="dv">7</span>])</span></code></pre></div>
<pre class="output"><code>[1] 4</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="co"># standard deviation of inflammation on day 7</span></span>
<span id="cb65-2"><a href="#cb65-2"></a><span class="kw">sd</span>(dat[, <span class="dv">7</span>])</span></code></pre></div>
<pre class="output"><code>[1] 1.725187</code></pre>
<div id="forcing-conversion" class="section level2 callout" markdown="1">
<h2>Forcing Conversion</h2>
<p>Note that R may return an error when you attempt to perform similar calculations on subsetted <em>rows</em> of data frames. This is because some functions in R automatically convert the object type to a numeric vector, while others do not (e.g. <code>max(dat[1, ])</code> works as expected, while <code>mean(dat[1, ])</code> returns <code>NA</code> and a warning). You get the expected output by including an explicit call to <code>as.numeric()</code>, e.g. <code>mean(as.numeric(dat[1, ]))</code>. By contrast, calculations on subsetted <em>columns</em> always work as expected, since columns of data frames are already defined as vectors.</p>
</div>
<p>R also has a function that summaries the previous common calculations:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a><span class="co"># Summarize function</span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="kw">summary</span>(dat[, <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>])</span></code></pre></div>
<pre class="output"><code>       V1          V2             V3              V4      
 Min.   :0   Min.   :0.00   Min.   :0.000   Min.   :0.00  
 1st Qu.:0   1st Qu.:0.00   1st Qu.:1.000   1st Qu.:1.00  
 Median :0   Median :0.00   Median :1.000   Median :2.00  
 Mean   :0   Mean   :0.45   Mean   :1.117   Mean   :1.75  
 3rd Qu.:0   3rd Qu.:1.00   3rd Qu.:2.000   3rd Qu.:3.00  
 Max.   :0   Max.   :1.00   Max.   :2.000   Max.   :3.00  </code></pre>
<p>For every column in the data frame, the function “summary” calculates: the minimun value, the first quartile, the median, the mean, the third quartile and the max value, giving helpful details about the sample distribution.</p>
<p>What if we need the maximum inflammation for all patients, or the average for each day? As the diagram below shows, we want to perform the operation across a margin of the data frame:</p>
<p><img src="fig/r-operations-across-margins.svg" alt="Operations Across Margins" /></p>
<p>To support this, we can use the <code>apply</code> function.</p>
<div id="getting-help" class="section level2 callout" markdown="1">
<h2>Getting Help</h2>
<p>To learn about a function in R, e.g. <code>apply</code>, we can read its help documention by running <code>help(apply)</code> or <code>?apply</code>.</p>
</div>
<p><code>apply</code> allows us to repeat a function on all of the rows (<code>MARGIN = 1</code>) or columns (<code>MARGIN = 2</code>) of a data frame.</p>
<p>Thus, to obtain the average inflammation of each patient we will need to calculate the mean of all of the rows (<code>MARGIN = 1</code>) of the data frame.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>avg_patient_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">1</span>, mean)</span></code></pre></div>
<p>And to obtain the average inflammation of each day we will need to calculate the mean of all of the columns (<code>MARGIN = 2</code>) of the data frame.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>avg_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, mean)</span></code></pre></div>
<p>Since the second argument to <code>apply</code> is <code>MARGIN</code>, the above command is equivalent to <code>apply(dat, MARGIN = 2, mean)</code>. We’ll learn why this is so in the next lesson.</p>
<div id="efficient-alternatives" class="section level2 callout" markdown="1">
<h2>Efficient Alternatives</h2>
<p>Some common operations have more efficient alternatives. For example, you can calculate the row-wise or column-wise means with <code>rowMeans</code> and <code>colMeans</code>, respectively.</p>
</div>
<div class="challenge" markdown="1">
<div id="subsetting-data" class="section level2">
<h2>Subsetting Data</h2>
<p>We can take subsets of character vectors as well:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>animal &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;k&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="co"># first three characters</span></span>
<span id="cb71-3"><a href="#cb71-3"></a>animal[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre class="output"><code>[1] &quot;m&quot; &quot;o&quot; &quot;n&quot;</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="co"># last three characters</span></span>
<span id="cb73-2"><a href="#cb73-2"></a>animal[<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre class="output"><code>[1] &quot;k&quot; &quot;e&quot; &quot;y&quot;</code></pre>
<ol style="list-style-type: decimal">
<li><p>If the first four characters are selected using the subset <code>animal[1:4]</code>, how can we obtain the first four characters in reverse order?</p></li>
<li><p>What is <code>animal[-1]</code>? What is <code>animal[-4]</code>? Given those answers, explain what <code>animal[-1:-4]</code> does.</p></li>
<li><p>Use a subset of <code>animal</code> to create a new character vector that spells the word “eon”, i.e. <code>c("e", "o", "n")</code>.</p></li>
</ol>
</div>
<div id="solutions" class="section level2 solution" markdown="1">
<h2>Solutions</h2>
<ol style="list-style-type: decimal">
<li><p><code>animal[4:1]</code></p></li>
<li><p><code>"o" "n" "k" "e" "y"</code> and <code>"m" "o" "n" "e" "y"</code>, which means that a single <code>-</code> removes the element at the given index position. <code>animal[-1:-4]</code> remove the subset, returning <code>"e" "y"</code>, which is equivalent to <code>animal[5:6]</code>.</p></li>
<li><p><code>animal[c(5,2,3)]</code> combines indexing with the <code>c</code>ombine function.</p></li>
</ol>
</div>
</div>
<div class="challenge" markdown="1">
<div id="subsetting-more-data" class="section level2">
<h2>Subsetting More Data</h2>
<p>Suppose you want to determine the maximum inflammation for patient 5 across days three to seven. To do this you would extract the relevant subset from the data frame and calculate the maximum value. Which of the following lines of R code gives the correct answer? 1. <code>max(dat[5, ])</code> 2. <code>max(dat[3:7, 5])</code> 3. <code>max(dat[5, 3:7])</code> 4. <code>max(dat[5, 3, 7])</code></p>
</div>
<div id="solution-3" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<p>Answer: 3</p>
<p>Explanation: You want to extract the part of the dataframe representing data for patient 5 from days three to seven. In this dataframe, patient data is organised in rows and the days are represented by the columns. Subscripting in R follows the <code>[i, j]</code> principle, where <code>i = rows</code> and <code>j = columns</code>. Thus, answer 3 is correct since the patient is represented by the value for i (5) and the days are represented by the values in j, which is a subset spanning day 3 to 7.</p>
</div>
</div>
<div class="challenge" markdown="1">
<div id="subsetting-and-re-assignment" class="section level2">
<h2>Subsetting and Re-Assignment</h2>
<p>Using the inflammation data frame <code>dat</code> from above: Let’s pretend there was something wrong with the instrument on the first five days for every second patient (#2, 4, 6, etc.), which resulted in the measurements being twice as large as they should be. 1. Write a vector containing each affected patient (hint: <code>?seq</code>) 2. Create a new data frame in which you halve the first five days’ values in only those patients 3. Print out the corrected data frame to check that your code has fixed the problem</p>
</div>
<div id="solution-4" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>whichPatients &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">2</span>, <span class="dv">60</span>, <span class="dv">2</span>) <span class="co"># i.e., which rows</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>whichDays &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">5</span>)         <span class="co"># i.e., which columns</span></span>
<span id="cb75-3"><a href="#cb75-3"></a>dat2 &lt;-<span class="st"> </span>dat</span>
<span id="cb75-4"><a href="#cb75-4"></a><span class="co"># check the size of your subset: returns `30 5`, that is 30 [rows=patients] by 5 [columns=days]</span></span>
<span id="cb75-5"><a href="#cb75-5"></a><span class="kw">dim</span>(dat2[whichPatients, whichDays])</span></code></pre></div>
<pre class="output"><code>[1] 30  5</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>dat2[whichPatients, whichDays] &lt;-<span class="st"> </span>dat2[whichPatients, whichDays] <span class="op">/</span><span class="st"> </span><span class="dv">2</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>dat2</span></code></pre></div>
<pre class="output"><code>   V1  V2  V3  V4  V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21 V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32 V33 V34 V35 V36 V37 V38 V39 V40
1   0 0.0 1.0 3.0 1.0  2  4  7  8   3   3   3  10   5   7   4   7   7  12  18   6  13  11  11   7   7   4   6   8   8   4   4   5   7   3   4   2   3   0   0
2   0 0.5 1.0 0.5 1.0  1  3  2  2   6  10  11   5   9   4   4   7  16   8   6  18   4  12   5  12   7  11   5  11   3   3   5   4   4   5   5   1   1   0   1
3   0 1.0 1.0 3.0 3.0  2  6  2  5   9   5   7   4   5   4  15   5  11   9  10  19  14  12  17   7  12  11   7   4   2  10   5   4   2   2   3   2   2   1   1
4   0 0.0 1.0 0.0 2.0  2  2  1  6   7  10   7   9  13   8   8  15  10  10   7  17   4   4   7   6  15   6   4   9  11   3   5   6   3   3   4   2   3   2   1
5   0 1.0 1.0 3.0 3.0  1  3  5  2   4   4   7   6   5   3  10   8  10   6  17   9  14   9   7  13   9  12   6   7   7   9   6   3   2   2   4   2   0   1   1
6   0 0.0 0.5 1.0 1.0  4  2  1  6   4   7   6   6   9   9  15   4  16  18  12  12   5  18   9   5   3  10   3  12   7   8   4   7   3   5   4   4   3   2   1
7   0 0.0 2.0 2.0 4.0  2  2  5  5   8   6   5  11   9   4  13   5  12  10   6   9  17  15   8   9   3  13   7   8   2   8   8   4   2   3   5   4   1   1   1
8   0 0.0 0.5 1.0 1.5  1  2  3  5   3   7   8   8   5  10   9  15  11  18  19  20   8   5  13  15  10   6  10   6   7   4   9   3   5   2   5   3   2   2   1
9   0 0.0 0.0 3.0 1.0  5  6  5  5   8   2   4  11  12  10  11   9  10  17  11   6  16  12   6   8  14   6  13  10  11   4   6   4   7   6   3   2   1   0   0
10  0 0.5 0.5 1.0 0.5  3  5  3  5   8   6   8  12   5  13   6  13   8  16   8  18  15  16  14  12   7   3   8   9  11   2   5   4   5   1   4   1   2   0   0
11  0 1.0 0.0 0.0 4.0  3  3  5  5   4   5   8   7  10  13   3   7  13  15  18   8  15  15  16  11  14  12   4  10  10   4   3   4   5   5   3   3   2   2   1
12  0 0.5 0.0 0.0 1.5  4  2  7  8   5   2   8  11   5   5   8  14  11   6  11   9  16  18   6  12   5   4   3   5   7   8   3   5   4   5   5   4   0   1   1
13  0 0.0 2.0 1.0 4.0  3  6  4  6   7   9   9   3  11   6  12   4  17  13  15  13  12   8   7   4   7  12   9   5   6   5   4   7   3   5   4   2   3   0   1
14  0 0.0 0.0 0.0 0.5  3  1  6  6   5   5   6   3   6  13   3  10  13   9  16  15   9  11   4   6   4  11  11  12   3   5   8   7   4   6   4   1   3   0   0
15  0 1.0 2.0 1.0 1.0  1  4  1  5   2   3   3  10   7  13   5   7  17   6   9  12  13  10   4  12   4   6   7   6  10   8   2   5   1   3   4   2   0   2   0
16  0 0.5 0.5 0.0 0.5  2  4  3  6   4   7   5   5   7   5  10   7   8  18  17   9   8  12  11  11  11  14   6  11   2  10   9   5   6   5   3   4   2   2   0
17  0 0.0 0.0 0.0 2.0  3  6  5  7   4   3   2  10   7   9  11  12   5  12   9  13  19  14  17   5  13   8  11   5  10   9   8   7   5   3   1   4   0   2   1
18  0 0.0 0.0 0.5 1.0  1  4  3  6   7   4   2  12   6  12   4  14   7   8  14  13  19   6   9  12   6   4  13   6   7   2   3   6   5   4   2   3   0   1   0
19  0 0.0 2.0 1.0 2.0  5  4  2  7   8   4   7  11   9   8  11  15  17  11  12   7  12   7   6   7   4  13   5   7   6   6   9   2   1   1   2   2   0   1   0
20  0 0.5 1.0 0.0 0.5  4  3  2  2   7   3   3  12  13  11  13   6   5   9  16   9  19  16  11   8   9  14  12  11   9   6   6   6   1   1   2   4   3   1   1
21  0 1.0 1.0 3.0 1.0  4  4  1  8   2   2   3  12  12  10  15  13   6   5   5  18  19   9   6  11  12   7   6   3   6   3   2   4   3   1   5   4   2   2   0
22  0 0.0 1.0 1.5 1.0  3  2  6  3   8   7   4   6   6   9   5  12  12   8   5  12  10  16   7  14  12   5   4   6   9   8   5   6   6   1   4   3   0   2   0
23  0 0.0 0.0 3.0 4.0  5  1  7  7   8   2   5  12   4  10  14   5   5  17  13  16  15  13   6  12   9  10   3   3   7   4   4   8   2   6   5   1   0   1   0
24  0 0.5 0.5 0.5 0.5  3  3  2  6   3   9   7   8   8   4  13   7  14  11  15  14  13   5  13   7  14   9  10   5  11   5   3   5   1   1   4   4   1   2   0
25  0 1.0 1.0 1.0 2.0  3  5  3  6   3   7  10   3   8  12   4  12   9  15   5  17  16   5  10  10  15   7   5   3  11   5   5   6   1   1   1   1   0   2   1
26  0 0.0 1.0 0.5 1.5  3  2  7  4   4   3   8  12   9  12   9   5  16   8  17   7  11  14   7  13  11   7  12  12   7   8   5   7   2   2   4   1   1   1   0
27  0 0.0 1.0 2.0 4.0  2  2  3  5   7  10   5   5  12   3  13   4  13   7  15   9  12  18  14  16  12   3  11   3   2   7   4   8   2   2   1   3   0   1   1
28  0 0.0 0.5 0.5 0.5  5  1  5  2   2   4  10   4   8  14   6  15   6  12  15  15  13   7  17   4   5  11   4   8   7   9   4   5   3   2   5   4   3   2   1
29  0 0.0 2.0 2.0 3.0  4  6  3  7   6   4   5   8   4   7   7   6  11  12  19  20  18   9   5   4   7  14   8   4   3   7   7   8   3   5   4   1   3   1   0
30  0 0.0 0.0 0.5 2.0  4  6  3  8   6   4  10  12   3   3   6   8   7  17  16  14  15  17   4  14  13   4   4  12  11   6   9   5   5   2   5   2   1   0   1
31  0 1.0 1.0 0.0 3.0  2  4  6  8   6   2   3  11   3  14  14  12   8   8  16  13   7   6   9  15   7   6   4  10   8  10   4   2   6   5   5   2   3   2   1
32  0 0.0 1.0 1.5 1.5  4  5  3  6   7  10   5  10  13  14   3   8  10   9   9  19  15  15   6   8   8  11   5   5   7   3   6   6   4   5   2   2   3   0   0
33  0 1.0 2.0 2.0 2.0  3  6  6  6   7   6   3  11  12  13  15  15  10  14  11  11   8   6  12  10   5  12   7   7  11   5   8   5   2   5   5   2   0   2   1
34  0 0.0 1.0 0.5 1.5  5  6  7  5   8   9   3  12  10  12   4  12   9  13  10  10   6  10  11   4  15  13   7   3   4   2   9   7   2   4   2   1   2   1   1
35  0 0.0 1.0 2.0 4.0  1  5  5  2   3   4   8   8  12   5  15   9  17   7  19  14  18  12  17  14   4  13  13   8  11   5   6   6   2   3   5   2   1   1   1
36  0 0.0 0.0 1.5 0.5  3  6  4  3   4   8   3   4   8   3  11   5   7  10   5  15   9  16  17  16   3   8   9   8   3   3   9   5   1   6   5   4   2   2   0
37  0 1.0 2.0 2.0 2.0  5  5  1  4   6   3   6   5   9   6   7   4   7  16   7  16  13   9  16  12   6   7   9  10   3   6   4   5   4   6   3   4   3   2   1
38  0 0.5 0.5 1.0 1.5  1  5  1  2   2   5   7   6   6   5  10   6   7  17  13  15  16  17  14   4   4  10  10  10  11   9   9   5   4   4   2   1   0   1   0
39  0 1.0 0.0 3.0 2.0  4  1  1  5   9  10   7  12  10   9  15  12  13  13   6  19   9  10   6  13   5  13   6   7   2   5   5   2   1   1   1   1   3   0   1
40  0 0.5 0.5 1.5 0.5  1  5  5  3   7   2   2   3  12   4   6   8  15  16  16  15   4  14   5  13  10   7  10   6   3   2   3   6   3   3   5   4   3   2   1
41  0 0.0 0.0 2.0 2.0  1  3  4  5   5   6   5   5  12  13   5   7   5  11  15  18   7   9  10  14  12  11   9  10   3   2   9   6   2   2   5   3   0   0   1
42  0 0.0 0.5 1.5 1.5  1  2  1  8   9   2   8  10   3   8   6  10  13  11  17  19   6   4  11   6  12   7   5   5   4   4   8   2   6   6   4   2   2   0   0
43  0 1.0 1.0 3.0 4.0  5  2  1  3   7   9   6  10   5   8  15  11  12  15   6  12  16   6   4  14   3  12   9   6  11   5   8   5   5   6   1   2   1   2   0
44  0 0.0 0.5 1.5 0.5  4  3  6  7   8   5   7  11   3   6  11   6  10   6  19  18  14   6  10   7   9   8   5   8   3  10   2   5   1   5   4   2   1   0   1
45  0 1.0 1.0 3.0 3.0  4  4  6  3   4   9   9   7   6   8  15  12  15   6  11   6  18   5  14  15  12   9   8   3   6  10   6   8   7   2   5   4   3   1   1
46  0 0.5 1.0 1.0 2.0  3  1  4  8   9   5  10  10   3   4   6   7  11  16   6  14   9  11  10  10   7  10   8   8   4   5   8   4   4   5   2   4   1   1   0
47  0 0.0 2.0 3.0 4.0  5  4  6  2   9   7   4   9  10   8  11  16  12  15  17  19  10  18  13  15  11   8   4   7  11   6   7   6   5   1   3   1   0   0   0
48  0 0.5 0.5 1.5 0.5  4  6  2  8   2  10   3  11   9  13  15   5  15   6  10  10   5  14  15  12   7   4   5  11   4   6   9   5   6   1   1   2   1   2   1
49  0 0.0 1.0 3.0 2.0  5  1  2  7   6   6   3  12   9   4  14   4   6  12   9  12   7  11   7  16   8  13   6   7   6  10   7   6   3   1   5   4   3   0   0
50  0 0.0 0.5 1.0 1.5  4  5  7  5   4  10   5  12  12   5   4   7   9  18  16  16  10  15  15  10   4   3   7   5   9   4   6   2   4   1   4   2   2   2   1
51  0 1.0 2.0 1.0 1.0  3  5  3  6   3  10  10  11  10  13  10  13   6   6  14   5   4   5   5   9   4  12   7   7   4   7   9   3   3   6   3   4   1   2   0
52  0 0.5 1.0 1.0 1.5  5  2  4  5   6   8   3   5   4   3  15  15  12  16   7  20  15  12   8   9   6  12   5   8   3   8   5   4   1   3   2   1   3   1   0
53  0 0.0 0.0 2.0 4.0  4  5  3  3   3  10   4   4   4  14  11  15  13  10  14  11  17   9  11  11   7  10  12  10  10  10   8   7   5   2   2   4   1   2   1
54  0 0.0 1.0 0.5 0.5  4  4  7  2   9   4  10  12   7   6   6  11  12   9  15  15   6   6  13   5  12   9   6   4   7   7   6   5   4   1   4   2   2   2   1
55  0 1.0 2.0 1.0 1.0  4  5  4  4   5   9   7  10   3  13  13   8   9  17  16  16  15  12  13   5  12  10   9  11   9   4   5   5   2   2   5   1   0   0   1
56  0 0.0 0.5 1.5 1.0  3  6  4  5   7   2   4  11  11   3   8   8  16   5  13  16   5   8   8   6   9  10  10   9   3   3   5   3   5   4   5   3   3   0   1
57  0 1.0 1.0 2.0 2.0  5  1  7  4   2   5   5   4   6   6   4  16  11  14  16  14  14   8  17   4  14  13   7   6   3   7   7   5   6   3   4   2   2   1   1
58  0 0.5 0.5 0.5 2.0  1  6  4  6   3   6   5   6   4  14  13  13   9  12  19   9  10  15  10   9  10  10   7   5   6   8   6   6   4   3   5   2   1   1   1
59  0 0.0 0.0 1.0 4.0  5  6  3  8   7   9  10   8   6   5  12  15   5  10   5   8  13  18  17  14   9  13   4  10  11  10   8   8   6   5   5   2   0   2   0
60  0 0.0 0.5 0.0 1.5  2  5  4  8   2   9   3   3  10  12   9  14  11  13   8   6  18  11   9  13  11   8   5   5   2   8   5   3   5   4   1   3   1   1   0</code></pre>
</div>
</div>
<div class="challenge" markdown="1">
<div id="using-the-apply-function-on-patient-data" class="section level2">
<h2>Using the Apply Function on Patient Data</h2>
<p>Challenge: the apply function can be used to summarize datasets and subsets of data across rows and columns using the MARGIN argument. Suppose you want to calculate the mean inflammation for specific days and patients in the patient dataset (i.e. 60 patients across 40 days). Please use a combination of the apply function and indexing to:</p>
<ol style="list-style-type: decimal">
<li>calculate the mean inflammation for patients 1 to 5 over the whole 40 days</li>
<li>calculate the mean inflammation for days 1 to 10 (across all patients).</li>
<li>calculate the mean inflammation for every second day (across all patients).</li>
</ol>
<p>Think about the number of rows and columns you would expect as the result before each apply call and check your intuition by applying the mean function.</p>
</div>
<div id="solution-5" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="co"># 1.</span></span>
<span id="cb79-2"><a href="#cb79-2"></a><span class="kw">apply</span>(dat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, ], <span class="dv">1</span>, mean)</span></code></pre></div>
<pre class="output"><code>    1     2     3     4     5 
5.450 5.425 6.100 5.900 5.550 </code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="co"># 2.</span></span>
<span id="cb81-2"><a href="#cb81-2"></a><span class="kw">apply</span>(dat[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], <span class="dv">2</span>, mean)</span></code></pre></div>
<pre class="output"><code>      V1       V2       V3       V4       V5       V6       V7       V8       V9      V10 
0.000000 0.450000 1.116667 1.750000 2.433333 3.150000 3.800000 3.883333 5.233333 5.516667 </code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="co"># 3.</span></span>
<span id="cb83-2"><a href="#cb83-2"></a><span class="kw">apply</span>(dat[, <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">40</span>, <span class="dt">by =</span> <span class="dv">2</span>)], <span class="dv">2</span>, mean)</span></code></pre></div>
<pre class="output"><code>       V1        V3        V5        V7        V9       V11       V13       V15       V17       V19       V21       V23       V25       V27       V29       V31       V33       V35       V37       V39 
 0.000000  1.116667  2.433333  3.800000  5.233333  5.950000  8.350000  8.366667  9.583333 11.566667 13.250000 11.033333 10.000000  9.150000  7.333333  6.066667  5.116667  3.300000  2.483333  1.133333 </code></pre>
</div>
</div>
<div id="plotting" class="section level3">
<h3>Plotting</h3>
<p>The mathematician Richard Hamming once said, “The purpose of computing is insight, not numbers,” and the best way to develop insight is often to visualize data. Visualization deserves an entire lecture (or course) of its own, but we can explore a few of R’s plotting features.</p>
<p>Let’s take a look at the average inflammation over time. Recall that we already calculated these values above using <code>apply(dat, 2, mean)</code> and saved them in the variable <code>avg_day_inflammation</code>. Plotting the values is done with the function <code>plot</code>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="kw">plot</span>(avg_day_inflammation)</span></code></pre></div>
<p><img src="fig/01-starting-with-data-plot-avg-inflammation-1.png" title="plot of chunk plot-avg-inflammation" alt="plot of chunk plot-avg-inflammation" style="display: block; margin: auto;" /></p>
<p>Above, we gave the function <code>plot</code> a vector of numbers corresponding to the average inflammation per day across all patients. <code>plot</code> created a scatter plot where the y-axis is the average inflammation level and the x-axis is the order, or index, of the values in the vector, which in this case correspond to the 40 days of treatment. The result is roughly a linear rise and fall, which is suspicious: based on other studies, we expect a sharper rise and slower fall. Let’s have a look at two other statistics: the maximum and minimum inflammation per day.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>max_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, max)</span>
<span id="cb86-2"><a href="#cb86-2"></a><span class="kw">plot</span>(max_day_inflammation)</span></code></pre></div>
<p><img src="fig/01-starting-with-data-plot-max-inflammation-1.png" title="plot of chunk plot-max-inflammation" alt="plot of chunk plot-max-inflammation" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a>min_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, min)</span>
<span id="cb87-2"><a href="#cb87-2"></a><span class="kw">plot</span>(min_day_inflammation)</span></code></pre></div>
<p><img src="fig/01-starting-with-data-plot-min-inflammation-1.png" title="plot of chunk plot-min-inflammation" alt="plot of chunk plot-min-inflammation" style="display: block; margin: auto;" /></p>
<p>The maximum value rises and falls perfectly smoothly, while the minimum seems to be a step function. Neither result seems particularly likely, so either there’s a mistake in our calculations or something is wrong with our data.</p>
</div>
<div class="challenge" markdown="1">
<div id="plotting-data" class="section level2">
<h2>Plotting Data</h2>
<p>Create a plot showing the standard deviation of the inflammation data for each day across all patients.</p>
</div>
<div id="solution-6" class="section level2 solution" markdown="1">
<h2>Solution</h2>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>sd_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, sd)</span>
<span id="cb88-2"><a href="#cb88-2"></a><span class="kw">plot</span>(sd_day_inflammation)</span></code></pre></div>
<p><img src="fig/01-starting-with-data-dovetail-chunk-18-1-1.png" title="plot of chunk dovetail-chunk-18-1" alt="plot of chunk dovetail-chunk-18-1" style="display: block; margin: auto;" /></p>
</div>
</div>
<p>{% include links.md %}</p>
<div class="keypoints" markdown="1">
<ul>
<li>Use <code>variable &lt;- value</code> to assign a value to a variable in order to record it in memory.</li>
<li>Objects are created on demand whenever a value is assigned to them.</li>
<li>The function <code>dim</code> gives the dimensions of a data frame.</li>
<li>Use <code>object[x, y]</code> to select a single element from a data frame.</li>
<li>Use <code>from:to</code> to specify a sequence that includes the indices from <code>from</code> to <code>to</code>.</li>
<li>All the indexing and subsetting that works on data frames also works on vectors.</li>
<li>Use <code>#</code> to add comments to programs.</li>
<li>Use <code>mean</code>, <code>max</code>, <code>min</code> and <code>sd</code> to calculate simple statistics.</li>
<li>Use <code>apply</code> to calculate statistics across the rows or columns of a data frame.</li>
<li>Use <code>plot</code> to create simple visualizations.</li>
</ul>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


<!-- END:   inst/pkgdown/templates/content-title-body.html-->


      <footer>
      <!-- START: inst/pkgdown/templates/footer.html -->
<div class="container">
  <div class="row">
    <div class="col-xs-1">
      <h3 class="text-left">
        <a href="index.html"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      </h3>
    </div>
    <div class="col-xs-10">
      <h3 class="maintitle"><a href="index.html">Programming with R</a></h3>
    </div>
    <div class="col-xs-1">
      <h3 class="text-right">
        <a href="02-func-R.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      </h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2018–2020
      by <a href="https://carpentries.org">The Carpentries</a>
      <br>
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2016–2018
      by <a href="https://softwarecarpentry.org">Software Carpentry Foundation</a>
    </div>
    <div class="col-md-6 help-links pull-right" align="right">
      <a href="https://github.com/zkamvar/miniature-octo-waffle/edit/main/episodes/01-starting-with-data.Rmd" data-checker-ignore>Edit on GitHub</a>
      /
      <a href="https://github.com/zkamvar/miniature-octo-waffle/blob/main/CONTRIBUTING.md" data-checker-ignore>Contributing</a>
      /
      <a href="https://github.com/zkamvar/miniature-octo-waffle/">Source</a>
      /
      <a href="https://github.com/zkamvar/miniature-octo-waffle/blob/main/CITATION" data-checker-ignore>Cite</a>
      /
      <a href="mailto:zkamvar@carpentries.org">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/zkamvar/varnish">The <b>New</b> Carpentries style</a>
      version <a href="https://github.com/zkamvar/varnish">Latest</a>.
    </div>
  </div>
</div>
<!-- END:   inst/pkgdown/templates/footer.html-->

      </footer>
   </div>

  <!-- START: inst/pkgdown/templates/docsearch.html -->

<!-- END:   inst/pkgdown/templates/docsearch.html-->


  </body>
</html>

<!-- END:   inst/pkgdown/templates/layout.html-->

